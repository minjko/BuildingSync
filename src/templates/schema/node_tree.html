<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Node Tree</title>
    <style>
        ul {
            list-style-type: none;
            cursor: pointer;
        }
    </style>
</head>
<body>

<h1>Node Tree</h1>

<div id="node-tree"></div>

<script>
document.addEventListener("DOMContentLoaded", function() {
    var xhr = new XMLHttpRequest();
    xhr.open("GET", "/schema/api/nodes/");
    xhr.onload = function() {
        if (xhr.status === 200) {
            var data = JSON.parse(xhr.responseText);
            var nodeTree = drawTree(data);
            document.getElementById("node-tree").appendChild(nodeTree);
        } else {
            console.error("Failed to fetch data");
        }
    };
    xhr.send();

    function drawTree(data) {
        var ul = document.createElement("ul");
        data.forEach(function(node) {
            var li = document.createElement("li");
            var details = document.createElement("details");
            var summary = document.createElement("summary");
            var childUl;
            
            summary.textContent = node.name;
            
            if (node.children && node.children.length) {
                childUl = drawTree(node.children);
            } else {
                childUl = document.createTextNode('aa'); 
            }

            details.appendChild(childUl);
            details.appendChild(summary);
            li.appendChild(details);
            ul.appendChild(li);







        });
        return ul;
    }
});
</script>

</body>
</html>
