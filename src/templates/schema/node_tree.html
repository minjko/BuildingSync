<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Node Tree</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        details {
            padding-left: 20px; /* 부모 노드의 들여쓰기 크기 */
        }
        details > ul {
            padding-left: 20px; /* 자식 노드의 들여쓰기 크기 */
        }
    </style>
</head>
<body>

<h1>Node Tree</h1>

<div id="node-tree"></div>

<script>
$(document).ready(function(){
    $.ajax({
        url: "/schema/api/nodes/",  // API endpoint URL
        type: "GET",
        success: function(data) {
            function renderTree(data) {
                var fragment = $(document.createDocumentFragment());

                data.forEach(function(node) {
                    var details = $('<details></details>');
                    var summary = $('<summary></summary>').text(node.name);

                    details.append(summary);

                    if (node.children && node.children.length > 0) {
                        var childNodes = renderTree(node.children);
                        details.append(childNodes);
                    }

                    fragment.append(details);
                });

                return fragment;
            }

            $('#node-tree').append(renderTree(data));
        }
    });
});
</script>

</body>
</html>
